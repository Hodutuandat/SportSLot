{% extends 'base.html' %}
{% block title %}Th√™m s√¢n m·ªõi | SportSlot Owner{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/owner/dashboard.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/owner/add_field.css') }}">
{% endblock %}

{% block content %}
<div class="owner-add-field-container">
        <!-- Header -->
        <header class="main-header">
            <div class="header-content">
                <h1>Th√™m s√¢n m·ªõi</h1>
                <div class="header-actions">
                    <button class="draft-btn" onclick="saveDraft()">
                        <span class="btn-icon">üíæ</span>
                        L∆∞u nh√°p
                    </button>
                </div>
            </div>
        </header>

        <!-- Add Field Content -->
        <div class="add-field-content">
            <!-- Progress Steps -->
            <div class="progress-container">
                <div class="progress-steps">
                    <div class="step active" data-step="1">
                        <div class="step-number">1</div>
                        <div class="step-label">Th√¥ng tin c∆° b·∫£n</div>
                    </div>
                    <div class="step" data-step="2">
                        <div class="step-number">2</div>
                        <div class="step-label">V·ªã tr√≠ & ƒê·ªãa ch·ªâ</div>
                    </div>
                    <div class="step" data-step="3">
                        <div class="step-number">3</div>
                        <div class="step-label">H√¨nh ·∫£nh & Ti·ªán √≠ch</div>
                    </div>
                    <div class="step" data-step="4">
                        <div class="step-number">4</div>
                        <div class="step-label">Gi√° c·∫£ & Th·ªùi gian</div>
                    </div>
                    <div class="step" data-step="5">
                        <div class="step-number">5</div>
                        <div class="step-label">Xem l·∫°i & X√°c nh·∫≠n</div>
                    </div>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 20%"></div>
                </div>
            </div>

            <!-- Form Container -->
            <form id="addFieldForm" class="add-field-form">
                <!-- Step 1: Basic Information -->
                <div class="form-step active" data-step="1">
                    <div class="step-content">
                        <div class="step-header">
                            <h2>Th√¥ng tin c∆° b·∫£n</h2>
                            <p>Nh·∫≠p th√¥ng tin c∆° b·∫£n v·ªÅ s√¢n th·ªÉ thao c·ªßa b·∫°n</p>
                        </div>
                        
                        <div class="form-grid">
                            <div class="form-group">
                                <label for="fieldName">T√™n s√¢n <span class="required">*</span></label>
                                <input type="text" id="fieldName" name="fieldName" placeholder="V√≠ d·ª•: S√¢n B√≥ng ƒê√° Premier League" required>
                                <div class="input-hint">T√™n s√¢n s·∫Ω hi·ªÉn th·ªã cho kh√°ch h√†ng</div>
                            </div>

                            <div class="form-group">
                                <label for="fieldType">Lo·∫°i s√¢n <span class="required">*</span></label>
                                <select id="fieldType" name="fieldType" required>
                                    <option value="">Ch·ªçn lo·∫°i s√¢n</option>
                                    <option value="football">‚öΩ S√¢n B√≥ng ƒê√°</option>
                                    <option value="tennis">üéæ S√¢n Tennis</option>
                                    <option value="badminton">üè∏ S√¢n C·∫ßu L√¥ng</option>
                                    <option value="basketball">üèÄ S√¢n B√≥ng R·ªï</option>
                                    <option value="volleyball">üèê S√¢n B√≥ng Chuy·ªÅn</option>
                                    <option value="futsal">‚öΩ S√¢n Futsal</option>
                                    <option value="ping-pong">üèì B√†n Ping Pong</option>
                                    <option value="other">üèüÔ∏è Kh√°c</option>
                                </select>
                            </div>

                            <div class="form-group full-width">
                                <label for="fieldDescription">M√¥ t·∫£ s√¢n</label>
                                <textarea id="fieldDescription" name="fieldDescription" rows="4" placeholder="M√¥ t·∫£ chi ti·∫øt v·ªÅ s√¢n th·ªÉ thao, ƒëi·ªÅu ki·ªán, ch·∫•t l∆∞·ª£ng..."></textarea>
                                <div class="input-hint">M√¥ t·∫£ chi ti·∫øt s·∫Ω gi√∫p kh√°ch h√†ng hi·ªÉu r√µ h∆°n v·ªÅ s√¢n</div>
                            </div>

                            <div class="form-group">
                                <label for="capacity">S·ª©c ch·ª©a (ng∆∞·ªùi)</label>
                                <input type="number" id="capacity" name="capacity" min="2" max="50" placeholder="V√≠ d·ª•: 22">
                            </div>

                            <div class="form-group">
                                <label for="fieldSize">K√≠ch th∆∞·ªõc s√¢n</label>
                                <input type="text" id="fieldSize" name="fieldSize" placeholder="V√≠ d·ª•: 100m x 60m">
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 2: Location & Address -->
                <div class="form-step" data-step="2">
                    <div class="step-content">
                        <div class="step-header">
                            <h2>V·ªã tr√≠ & ƒê·ªãa ch·ªâ</h2>
                            <p>Th√¥ng tin v·ªã tr√≠ v√† ƒë·ªãa ch·ªâ chi ti·∫øt c·ªßa s√¢n</p>
                        </div>
                        
                        <div class="form-grid">
                            <div class="form-group full-width">
                                <label for="address">ƒê·ªãa ch·ªâ ƒë·∫ßy ƒë·ªß <span class="required">*</span></label>
                                <input type="text" id="address" name="address" placeholder="S·ªë nh√†, t√™n ƒë∆∞·ªùng, ph∆∞·ªùng/x√£, qu·∫≠n/huy·ªán, th√†nh ph·ªë" required>
                            </div>

                            <div class="form-group">
                                <label for="city">T·ªânh/Th√†nh ph·ªë <span class="required">*</span></label>
                                <select id="city" name="city" required>
                                    <option value="">Ch·ªçn t·ªânh/th√†nh</option>
                                    <option value="ho-chi-minh">TP. H·ªì Ch√≠ Minh</option>
                                    <option value="ha-noi">H√† N·ªôi</option>
                                    <option value="da-nang">ƒê√† N·∫µng</option>
                                    <option value="can-tho">C·∫ßn Th∆°</option>
                                    <option value="hai-phong">H·∫£i Ph√≤ng</option>
                                    <option value="other">Kh√°c</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="district">Qu·∫≠n/Huy·ªán <span class="required">*</span></label>
                                <select id="district" name="district" required>
                                    <option value="">Ch·ªçn qu·∫≠n/huy·ªán</option>
                                    <option value="quan-1">Qu·∫≠n 1</option>
                                    <option value="quan-2">Qu·∫≠n 2</option>
                                    <option value="quan-3">Qu·∫≠n 3</option>
                                    <option value="quan-4">Qu·∫≠n 4</option>
                                    <option value="thu-duc">Th·ªß ƒê·ª©c</option>
                                    <option value="other">Kh√°c</option>
                                </select>
                            </div>

                            <!-- Map Container -->
                            <div class="form-group full-width">
                                <label>V·ªã tr√≠ tr√™n b·∫£n ƒë·ªì</label>
                                <div class="map-container">
                                    <div id="map" class="map-display">
                                        <div class="map-placeholder">
                                            <div class="map-icon">üó∫Ô∏è</div>
                                            <p>Click ƒë·ªÉ ch·ªçn v·ªã tr√≠ ch√≠nh x√°c</p>
                                            <div class="coordinates">
                                                <span>Lat: <span id="latitude">10.7769</span></span>
                                                <span>Lng: <span id="longitude">106.7009</span></span>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="parking">Ch·ªó ƒë·ªó xe</label>
                                <select id="parking" name="parking">
                                    <option value="available">C√≥ ch·ªó ƒë·ªó xe</option>
                                    <option value="limited">Ch·ªó ƒë·ªó xe h·∫°n ch·∫ø</option>
                                    <option value="none">Kh√¥ng c√≥ ch·ªó ƒë·ªó xe</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="transportation">Ph∆∞∆°ng ti·ªán c√¥ng c·ªông</label>
                                <textarea id="transportation" name="transportation" rows="2" placeholder="G·∫ßn tr·∫°m xe bus, metro..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 3: Images & Amenities -->
                <div class="form-step" data-step="3">
                    <div class="step-content">
                        <div class="step-header">
                            <h2>H√¨nh ·∫£nh & Ti·ªán √≠ch</h2>
                            <p>Upload h√¨nh ·∫£nh v√† m√¥ t·∫£ c√°c ti·ªán √≠ch ƒëi k√®m</p>
                        </div>
                        
                        <div class="form-grid">
                            <!-- Image Upload -->
                            <div class="form-group full-width">
                                <label>H√¨nh ·∫£nh s√¢n <span class="required">*</span></label>
                                <div class="image-upload-container">
                                    <div class="upload-zone" onclick="triggerFileInput()">
                                        <div class="upload-icon">üì∑</div>
                                        <p>K√©o th·∫£ ho·∫∑c click ƒë·ªÉ upload h√¨nh ·∫£nh</p>
                                        <div class="upload-hint">JPG, PNG, t·ªëi ƒëa 5MB m·ªói ·∫£nh</div>
                                    </div>
                                    <input type="file" id="fieldImages" name="fieldImages" multiple accept="image/*" style="display: none;">
                                    <div class="image-preview-container">
                                        <!-- Preview images will be added here -->
                                    </div>
                                </div>
                            </div>

                            <!-- Amenities -->
                            <div class="form-group full-width">
                                <label>Ti·ªán √≠ch c√≥ s·∫µn</label>
                                <div class="amenities-grid">
                                    <div class="amenity-item">
                                        <input type="checkbox" id="parking-amenity" name="amenities" value="parking">
                                        <label for="parking-amenity">üöó B√£i ƒë·ªó xe</label>
                                    </div>
                                    <div class="amenity-item">
                                        <input type="checkbox" id="restroom" name="amenities" value="restroom">
                                        <label for="restroom">üöª Ph√≤ng v·ªá sinh</label>
                                    </div>
                                    <div class="amenity-item">
                                        <input type="checkbox" id="shower" name="amenities" value="shower">
                                        <label for="shower">üöø Ph√≤ng t·∫Øm</label>
                                    </div>
                                    <div class="amenity-item">
                                        <input type="checkbox" id="locker" name="amenities" value="locker">
                                        <label for="locker">üóÑÔ∏è T·ªß ƒë·ªì</label>
                                    </div>
                                    <div class="amenity-item">
                                        <input type="checkbox" id="lighting" name="amenities" value="lighting">
                                        <label for="lighting">üí° √Ånh s√°ng ƒë√™m</label>
                                    </div>
                                    <div class="amenity-item">
                                        <input type="checkbox" id="water" name="amenities" value="water">
                                        <label for="water">üíß N∆∞·ªõc u·ªëng</label>
                                    </div>
                                    <div class="amenity-item">
                                        <input type="checkbox" id="equipment" name="amenities" value="equipment">
                                        <label for="equipment">‚öΩ D·ª•ng c·ª• th·ªÉ thao</label>
                                    </div>
                                    <div class="amenity-item">
                                        <input type="checkbox" id="wifi" name="amenities" value="wifi">
                                        <label for="wifi">üì∂ WiFi mi·ªÖn ph√≠</label>
                                    </div>
                                    <div class="amenity-item">
                                        <input type="checkbox" id="canteen" name="amenities" value="canteen">
                                        <label for="canteen">üçΩÔ∏è CƒÉng tin</label>
                                    </div>
                                    <div class="amenity-item">
                                        <input type="checkbox" id="first-aid" name="amenities" value="first-aid">
                                        <label for="first-aid">üè• Y t·∫ø c∆° b·∫£n</label>
                                    </div>
                                </div>
                            </div>

                            <!-- Field Rules -->
                            <div class="form-group full-width">
                                <label for="rules">Quy ƒë·ªãnh s·ª≠ d·ª•ng s√¢n</label>
                                <textarea id="rules" name="rules" rows="4" placeholder="C√°c quy ƒë·ªãnh v·ªÅ an to√†n, s·ª≠ d·ª•ng thi·∫øt b·ªã, th·ªùi gian..."></textarea>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 4: Pricing & Schedule -->
                <div class="form-step" data-step="4">
                    <div class="step-content">
                        <div class="step-header">
                            <h2>Gi√° c·∫£ & Th·ªùi gian</h2>
                            <p>Thi·∫øt l·∫≠p gi√° thu√™ v√† th·ªùi gian ho·∫°t ƒë·ªông</p>
                        </div>
                        
                        <div class="form-grid">
                            <!-- Operating Hours -->
                            <div class="form-group full-width">
                                <label>Gi·ªù ho·∫°t ƒë·ªông</label>
                                <div class="schedule-grid">
                                    <div class="schedule-item">
                                        <label>Th·ª© 2 - Th·ª© 6:</label>
                                        <div class="time-range">
                                            <input type="time" name="weekday_start" value="06:00">
                                            <span>ƒë·∫øn</span>
                                            <input type="time" name="weekday_end" value="23:00">
                                        </div>
                                    </div>
                                    <div class="schedule-item">
                                        <label>Th·ª© 7 - Ch·ªß nh·∫≠t:</label>
                                        <div class="time-range">
                                            <input type="time" name="weekend_start" value="05:00">
                                            <span>ƒë·∫øn</span>
                                            <input type="time" name="weekend_end" value="23:00">
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Pricing Table -->
                            <div class="form-group full-width">
                                <label>B·∫£ng gi√° thu√™ s√¢n (VNƒê/gi·ªù)</label>
                                <div class="pricing-table">
                                    <div class="pricing-header">
                                        <div>Khung gi·ªù</div>
                                        <div>Th·ª© 2-6</div>
                                        <div>Th·ª© 7-CN</div>
                                    </div>
                                    <div class="pricing-row">
                                        <div class="time-slot">S√°ng (05:00-12:00)</div>
                                        <input type="number" name="morning_weekday" placeholder="200000" min="0">
                                        <input type="number" name="morning_weekend" placeholder="250000" min="0">
                                    </div>
                                    <div class="pricing-row">
                                        <div class="time-slot">Chi·ªÅu (12:00-17:00)</div>
                                        <input type="number" name="afternoon_weekday" placeholder="300000" min="0">
                                        <input type="number" name="afternoon_weekend" placeholder="350000" min="0">
                                    </div>
                                    <div class="pricing-row">
                                        <div class="time-slot">T·ªëi (17:00-23:00)</div>
                                        <input type="number" name="evening_weekday" placeholder="400000" min="0">
                                        <input type="number" name="evening_weekend" placeholder="450000" min="0">
                                    </div>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="deposit">Ti·ªÅn c·ªçc (%)</label>
                                <input type="number" id="deposit" name="deposit" min="0" max="100" value="30" placeholder="30">
                                <div class="input-hint">Ph·∫ßn trƒÉm ti·ªÅn c·ªçc khi ƒë·∫∑t s√¢n</div>
                            </div>

                            <div class="form-group">
                                <label for="cancellation">Ch√≠nh s√°ch h·ªßy (gi·ªù tr∆∞·ªõc)</label>
                                <select id="cancellation" name="cancellation">
                                    <option value="2">2 gi·ªù tr∆∞·ªõc</option>
                                    <option value="4">4 gi·ªù tr∆∞·ªõc</option>
                                    <option value="12">12 gi·ªù tr∆∞·ªõc</option>
                                    <option value="24">24 gi·ªù tr∆∞·ªõc</option>
                                    <option value="48">48 gi·ªù tr∆∞·ªõc</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Step 5: Review & Confirm -->
                <div class="form-step" data-step="5">
                    <div class="step-content">
                        <div class="step-header">
                            <h2>Xem l·∫°i & X√°c nh·∫≠n</h2>
                            <p>Ki·ªÉm tra l·∫°i th√¥ng tin tr∆∞·ªõc khi t·∫°o s√¢n m·ªõi</p>
                        </div>
                        
                        <div class="review-container">
                            <div class="review-section">
                                <h3>Th√¥ng tin c∆° b·∫£n</h3>
                                <div class="review-grid">
                                    <div class="review-item">
                                        <label>T√™n s√¢n:</label>
                                        <span id="review-name">-</span>
                                    </div>
                                    <div class="review-item">
                                        <label>Lo·∫°i s√¢n:</label>
                                        <span id="review-type">-</span>
                                    </div>
                                    <div class="review-item">
                                        <label>S·ª©c ch·ª©a:</label>
                                        <span id="review-capacity">-</span>
                                    </div>
                                    <div class="review-item full-width">
                                        <label>M√¥ t·∫£:</label>
                                        <span id="review-description">-</span>
                                    </div>
                                </div>
                            </div>

                            <div class="review-section">
                                <h3>V·ªã tr√≠</h3>
                                <div class="review-grid">
                                    <div class="review-item full-width">
                                        <label>ƒê·ªãa ch·ªâ:</label>
                                        <span id="review-address">-</span>
                                    </div>
                                </div>
                            </div>

                            <div class="review-section">
                                <h3>H√¨nh ·∫£nh & Ti·ªán √≠ch</h3>
                                <div class="review-images">
                                    <div id="review-images-container">
                                        <!-- Images will be shown here -->
                                    </div>
                                </div>
                                <div class="review-amenities">
                                    <label>Ti·ªán √≠ch:</label>
                                    <div id="review-amenities-list">-</div>
                                </div>
                            </div>

                            <div class="review-section">
                                <h3>Gi√° c·∫£ & Th·ªùi gian</h3>
                                <div class="review-pricing">
                                    <div id="review-pricing-table">
                                        <!-- Pricing table will be generated here -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Form Navigation -->
                <div class="form-navigation">
                    <button type="button" class="nav-btn prev-btn" onclick="previousStep()" style="display: none;">
                        <span class="btn-icon">‚¨ÖÔ∏è</span>
                        Quay l·∫°i
                    </button>
                    <button type="button" class="nav-btn next-btn" onclick="nextStep()">
                        Ti·∫øp theo
                        <span class="btn-icon">‚û°Ô∏è</span>
                    </button>
                    <button type="submit" class="nav-btn submit-btn" style="display: none;">
                        <span class="btn-icon">‚úÖ</span>
                        T·∫°o s√¢n m·ªõi
                    </button>
                </div>
            </form>
        </div>
</div>

<!-- Success Modal -->
<div id="successModal" class="modal">
    <div class="modal-content success-modal">
        <button class="close-btn" onclick="closeSuccessModal()" style="position: absolute; top: 15px; right: 20px; background: none; border: none; font-size: 1.5rem; cursor: pointer; color: #6b7280; padding: 5px; transition: color 0.3s ease;">&times;</button>
        <div class="success-animation">
            <div class="checkmark">‚úì</div>
        </div>
        <h3>Th√†nh c√¥ng!</h3>
        <p>S√¢n th·ªÉ thao c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng v√† ƒëang ch·ªù duy·ªát.</p>
        <div class="modal-actions">
            <button class="action-btn primary" onclick="redirectToMyFields()">Xem s√¢n c·ªßa t√¥i</button>
            <button class="action-btn secondary" onclick="createAnotherField()">Th√™m s√¢n kh√°c</button>
        </div>
    </div>
</div>

{% endblock %}

{% block extra_js %}
<script src="{{ url_for('static', filename='js/owner/add_field.js') }}"></script>
{% endblock %} 