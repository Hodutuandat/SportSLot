{% extends 'base.html' %}
{% block title %}Danh SÃ¡ch SÃ¢n | SportSlot{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/customer/field_list.css') }}">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">
{% endblock %}

{% block content %}
<section class="field-list-page">
    <!-- Header Section -->
    <div class="field-list-header">
        <h1 class="field-list-title">Danh SÃ¡ch SÃ¢n Thá»ƒ Thao</h1>
        <p class="field-list-subtitle">KhÃ¡m phÃ¡ vÃ  Ä‘áº·t sÃ¢n thá»ƒ thao tá»‘t nháº¥t táº¡i thÃ nh phá»‘</p>
    </div>

    <!-- Filters Section -->
    <div class="field-list-filters">
        <select class="filter-select" id="sportFilter">
            <option value="">Chá»n mÃ´n thá»ƒ thao</option>
            <option value="football">âš½ BÃ³ng Ä‘Ã¡</option>
            <option value="volleyball">ğŸ BÃ³ng chuyá»n</option>
            <option value="basketball">ğŸ€ BÃ³ng rá»•</option>
            <option value="badminton">ğŸ¸ Cáº§u lÃ´ng</option>
            <option value="tennis">ğŸ¾ Tennis</option>
        </select>
        
        <input type="date" class="filter-date" id="dateFilter" placeholder="Chá»n ngÃ y">
        
        <select class="filter-select" id="timeFilter">
            <option value="">Chá»n giá» Ä‘áº·t</option>
            <option value="morning">ğŸŒ… SÃ¡ng (06:00 - 10:00)</option>
            <option value="noon">â˜€ï¸ TrÆ°a (10:00 - 14:00)</option>
            <option value="afternoon">ğŸŒ† Chiá»u (14:00 - 18:00)</option>
            <option value="evening">ğŸŒ™ Tá»‘i (18:00 - 22:00)</option>
        </select>
        
        <input type="text" class="filter-input" id="locationFilter" placeholder="ğŸ” TÃ¬m theo khu vá»±c...">
        
        <button class="filter-btn" onclick="applyFilters()">TÃ¬m kiáº¿m</button>
    </div>

    <!-- Statistics Bar -->
    <div class="field-stats">
        <div class="stat-item">
            <span class="stat-number">{{ fields|length if fields and fields|length > 0 else 0 }}</span>
            <span class="stat-label">SÃ¢n hiá»‡n cÃ³</span>
        </div>
        <div class="stat-item">
            <span class="stat-number">5+</span>
            <span class="stat-label">MÃ´n thá»ƒ thao</span>
        </div>
        <div class="stat-item">
            <span class="stat-number">24/7</span>
            <span class="stat-label">Há»— trá»£</span>
        </div>
        <div class="stat-item">
            <span class="stat-number">1000+</span>
            <span class="stat-label">Äáº·t sÃ¢n/thÃ¡ng</span>
        </div>
    </div>

    <!-- Field Cards -->
    <div class="field-list-cards" id="fieldCards">
        {% if fields %}
            {% for field in fields %}
            <div class="field-card" data-sport="{{ field.sport_type|lower if field.sport_type else 'general' }}" data-location="{{ field.address|lower if field.address else '' }}" data-price="{{ field.price if field.price else 0 }}">
                {% if field.image %}
                    <img src="{{ field.image }}" alt="{{ field.name if field.name else 'HÃ¬nh áº£nh sÃ¢n' }}" loading="lazy">
                {% else %}
                    <div class="no-image"></div>
                {% endif %}
                
                <div class="field-card-body">
                    <h3>{{ field.name if field.name else 'TÃªn sÃ¢n Ä‘ang cáº­p nháº­t' }}</h3>
                    <div class="field-info">
                        <span>{{ field.phone if field.phone else 'Äang cáº­p nháº­t' }}</span>
                        <span>{{ field.address if field.address else 'Äá»‹a chá»‰ Ä‘ang cáº­p nháº­t' }}</span>
                                                 {% if field.price and field.price > 0 %}
                         <span>ğŸ’° {{ "{:,.0f}".format(field.price) }}Ä‘/giá»</span>
                         {% else %}
                         <span>ğŸ’° Äang cáº­p nháº­t</span>
                         {% endif %}
                    </div>
                    <a href="{{ url_for('customer.field_detail', field_id=field.id) }}" class="field-detail-btn">Xem chi tiáº¿t</a>
                </div>
            </div>
            {% endfor %}
        {% elif not fields or fields|length == 0 %}
            <!-- Empty State -->
            <div class="empty-state">
                <div class="empty-state-icon">ğŸŸï¸</div>
                <h3>KhÃ´ng tÃ¬m tháº¥y sÃ¢n nÃ o</h3>
                <p>Hiá»‡n táº¡i chÆ°a cÃ³ sÃ¢n thá»ƒ thao nÃ o. Vui lÃ²ng thá»­ láº¡i sau hoáº·c liÃªn há»‡ vá»›i chÃºng tÃ´i Ä‘á»ƒ biáº¿t thÃªm thÃ´ng tin.</p>
            </div>
        {% endif %}
    </div>

    <!-- Loading State (Hidden by default, shown during AJAX requests) -->
    <div class="loading-cards" id="loadingCards" style="display: none;">
        <div class="loading-spinner"></div>
        <p>Äang táº£i danh sÃ¡ch sÃ¢n...</p>
        <div class="loading-card"></div>
        <div class="loading-card"></div>
        <div class="loading-card"></div>
        <div class="loading-card"></div>
    </div>
</section>

<script>
// Filter functionality
function applyFilters() {
    const sportFilter = document.getElementById('sportFilter').value.toLowerCase();
    const locationFilter = document.getElementById('locationFilter').value.toLowerCase();
    const fieldCards = document.querySelectorAll('.field-card');
    
    let visibleCount = 0;
    
    fieldCards.forEach(card => {
        const cardSport = card.dataset.sport || '';
        const cardLocation = card.dataset.location || '';
        
        const sportMatch = !sportFilter || cardSport.includes(sportFilter);
        const locationMatch = !locationFilter || cardLocation.includes(locationFilter);
        
        if (sportMatch && locationMatch) {
            card.style.display = 'flex';
            card.style.animation = `slideInUp 0.5s ease-out ${visibleCount * 0.1}s both`;
            visibleCount++;
        } else {
            card.style.display = 'none';
        }
    });
    
    // Show empty state if no results
    const emptyState = document.querySelector('.empty-state');
    if (visibleCount === 0 && !emptyState) {
        const container = document.getElementById('fieldCards');
        container.innerHTML = `
            <div class="empty-state">
                <div class="empty-state-icon">ğŸ”</div>
                <h3>KhÃ´ng tÃ¬m tháº¥y sÃ¢n phÃ¹ há»£p</h3>
                <p>Thá»­ thay Ä‘á»•i bá»™ lá»c hoáº·c tÃ¬m kiáº¿m vá»›i tá»« khÃ³a khÃ¡c.</p>
            </div>
        `;
    }
    
}



// Enhanced card interactions
document.addEventListener('DOMContentLoaded', function() {
    const fieldCards = document.querySelectorAll('.field-card');
    
    fieldCards.forEach((card, index) => {
        // Staggered entrance animation
        card.style.opacity = '0';
        card.style.transform = 'translateY(30px)';
        
        setTimeout(() => {
            card.style.transition = 'all 0.5s ease';
            card.style.opacity = '1';
            card.style.transform = 'translateY(0)';
        }, index * 100);
        
        // Enhanced click effects
        card.addEventListener('click', function(e) {
            if (e.target.classList.contains('field-detail-btn')) return;
            
            this.style.transform = 'translateY(-10px) scale(0.98)';
            setTimeout(() => {
                this.style.transform = '';
            }, 150);
        });
    });
    
    // Filter input enhancements
    const filterInputs = document.querySelectorAll('.filter-select, .filter-date, .filter-input');
    filterInputs.forEach(input => {
        input.addEventListener('focus', function() {
            this.style.transform = 'translateY(-2px)';
        });
        
        input.addEventListener('blur', function() {
            this.style.transform = '';
        });
    });
    
    console.log('ğŸŸï¸ Field List initialized with sports theme!');
});


</script>
{% endblock %} 