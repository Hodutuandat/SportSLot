{% extends "base.html" %}

{% block title %}Admin Dashboard - SportSlot{% endblock %}

{% block content %}
<div class="admin-dashboard">
    <!-- Header -->
    <div class="dashboard-header">
        <div class="header-content">
            <h1 class="dashboard-title">Dashboard</h1>
            <p class="dashboard-subtitle">T·ªïng quan h·ªá th·ªëng SportSlot</p>
        </div>
        <div class="header-actions">
            <div class="current-time">
                <span class="time-icon">üïê</span>
                <span class="time-text" id="currentTime"></span>
            </div>
            <div class="system-status">
                <span class="status-dot online"></span>
                <span class="status-text">H·ªá th·ªëng ho·∫°t ƒë·ªông</span>
            </div>
        </div>
    </div>

    <!-- Stats Cards -->
    <div class="stats-grid">
        <div class="stat-card">
            <div class="stat-icon users-icon">üë•</div>
            <div class="stat-content">
                <div class="stat-value">{{ "{:,}".format(stats.total_users) }}</div>
                <div class="stat-label">T·ªïng ng∆∞·ªùi d√πng</div>
                <div class="stat-growth positive">
                    <span class="growth-icon">‚Üó</span>
                    <span class="growth-text">+{{ growth_stats.users_growth }}%</span>
                </div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon owners-icon">üè¢</div>
            <div class="stat-content">
                <div class="stat-value">{{ stats.total_owners }}</div>
                <div class="stat-label">Ch·ªß s√¢n</div>
                <div class="stat-growth positive">
                    <span class="growth-icon">‚Üó</span>
                    <span class="growth-text">+{{ growth_stats.fields_growth }}%</span>
                </div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon fields-icon">‚öΩ</div>
            <div class="stat-content">
                <div class="stat-value">{{ stats.total_fields }}</div>
                <div class="stat-label">S√¢n th·ªÉ thao</div>
                <div class="stat-growth positive">
                    <span class="growth-icon">‚Üó</span>
                    <span class="growth-text">+{{ growth_stats.fields_growth }}%</span>
                </div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon bookings-icon">üìÖ</div>
            <div class="stat-content">
                <div class="stat-value">{{ "{:,}".format(stats.total_bookings) }}</div>
                <div class="stat-label">ƒê·∫∑t s√¢n</div>
                <div class="stat-growth positive">
                    <span class="growth-icon">‚Üó</span>
                    <span class="growth-text">+{{ growth_stats.bookings_growth }}%</span>
                </div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon revenue-icon">üí∞</div>
            <div class="stat-content">
                <div class="stat-value">{{ "{:,}".format(stats.total_revenue) }}ƒë</div>
                <div class="stat-label">Doanh thu</div>
                <div class="stat-growth positive">
                    <span class="growth-icon">‚Üó</span>
                    <span class="growth-text">+{{ growth_stats.revenue_growth }}%</span>
                </div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon pending-icon">‚è≥</div>
            <div class="stat-content">
                <div class="stat-value">{{ stats.pending_approvals }}</div>
                <div class="stat-label">Ch·ªù duy·ªát</div>
                <div class="stat-growth neutral">
                    <span class="growth-icon">‚Üí</span>
                    <span class="growth-text">C·∫ßn x·ª≠ l√Ω</span>
                </div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon health-icon">üíö</div>
            <div class="stat-content">
                <div class="stat-value">{{ stats.system_health }}%</div>
                <div class="stat-label">S·ª©c kh·ªèe h·ªá th·ªëng</div>
                <div class="stat-growth positive">
                    <span class="growth-icon">‚Üó</span>
                    <span class="growth-text">T·ªët</span>
                </div>
            </div>
        </div>

        <div class="stat-card">
            <div class="stat-icon sessions-icon">üë§</div>
            <div class="stat-content">
                <div class="stat-value">{{ stats.active_sessions }}</div>
                <div class="stat-label">Phi√™n ho·∫°t ƒë·ªông</div>
                <div class="stat-growth neutral">
                    <span class="growth-icon">‚Üí</span>
                    <span class="growth-text">Hi·ªán t·∫°i</span>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Content Grid -->
    <div class="dashboard-grid">
        <!-- Revenue Chart -->
        <div class="dashboard-card revenue-chart">
            <div class="card-header">
                <h3 class="card-title">Doanh thu theo th√°ng</h3>
                <div class="card-actions">
                    <button class="chart-filter active" data-period="month">Th√°ng</button>
                    <button class="chart-filter" data-period="quarter">Qu√Ω</button>
                    <button class="chart-filter" data-period="year">NƒÉm</button>
                </div>
            </div>
            <div class="card-content">
                <div class="chart-container">
                    <canvas id="revenueChart" width="400" height="200"></canvas>
                </div>
                <div class="chart-stats">
                    <div class="chart-stat">
                        <span class="stat-label">T·ªïng doanh thu</span>
                        <span class="stat-value">45.6M VNƒê</span>
                    </div>
                    <div class="chart-stat">
                        <span class="stat-label">TƒÉng tr∆∞·ªüng</span>
                        <span class="stat-value positive">+8.3%</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Recent Activities -->
        <div class="dashboard-card recent-activities">
            <div class="card-header">
                <h3 class="card-title">Ho·∫°t ƒë·ªông g·∫ßn ƒë√¢y</h3>
                <a href="{{ url_for('admin.activity_log') }}" class="view-all-link">Xem t·∫•t c·∫£</a>
            </div>
            <div class="card-content">
                <div class="activities-list">
                    {% for activity in recent_activities %}
                    <div class="activity-item">
                        <div class="activity-icon">{{ activity.icon }}</div>
                        <div class="activity-content">
                            <div class="activity-title">{{ activity.title }}</div>
                            <div class="activity-description">{{ activity.description }}</div>
                            <div class="activity-time">{{ activity.time }}</div>
                        </div>
                    </div>
                    {% endfor %}
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="dashboard-card quick-actions">
            <div class="card-header">
                <h3 class="card-title">Thao t√°c nhanh</h3>
            </div>
            <div class="card-content">
                <div class="actions-grid">
                    <a href="{{ url_for('admin.user_management') }}" class="action-item">
                        <div class="action-icon">üë•</div>
                        <div class="action-text">Qu·∫£n l√Ω ng∆∞·ªùi d√πng</div>
                    </a>
                    <a href="{{ url_for('admin.field_management') }}" class="action-item">
                        <div class="action-icon">‚öΩ</div>
                        <div class="action-text">Qu·∫£n l√Ω s√¢n</div>
                    </a>
                    <a href="{{ url_for('admin.booking_management') }}" class="action-item">
                        <div class="action-icon">üìÖ</div>
                        <div class="action-text">Qu·∫£n l√Ω ƒë·∫∑t s√¢n</div>
                    </a>
                    <a href="{{ url_for('admin.transaction_management') }}" class="action-item">
                        <div class="action-icon">üí∞</div>
                        <div class="action-text">Qu·∫£n l√Ω giao d·ªãch</div>
                    </a>
                    <a href="{{ url_for('admin.voucher_management') }}" class="action-item">
                        <div class="action-icon">üé´</div>
                        <div class="action-text">Qu·∫£n l√Ω voucher</div>
                    </a>
                    <a href="{{ url_for('admin.system_setting') }}" class="action-item">
                        <div class="action-icon">‚öôÔ∏è</div>
                        <div class="action-text">C√†i ƒë·∫∑t h·ªá th·ªëng</div>
                    </a>
                </div>
            </div>
        </div>

        <!-- System Health -->
        <div class="dashboard-card system-health">
            <div class="card-header">
                <h3 class="card-title">S·ª©c kh·ªèe h·ªá th·ªëng</h3>
                <div class="health-status">
                    <span class="health-dot online"></span>
                    <span class="health-text">T·ªët</span>
                </div>
            </div>
            <div class="card-content">
                <div class="health-metrics">
                    <div class="health-metric">
                        <div class="metric-label">CPU Usage</div>
                        <div class="metric-bar">
                            <div class="metric-fill" style="width: 45%"></div>
                        </div>
                        <div class="metric-value">45%</div>
                    </div>
                    <div class="health-metric">
                        <div class="metric-label">Memory Usage</div>
                        <div class="metric-bar">
                            <div class="metric-fill" style="width: 62%"></div>
                        </div>
                        <div class="metric-value">62%</div>
                    </div>
                    <div class="health-metric">
                        <div class="metric-label">Disk Usage</div>
                        <div class="metric-bar">
                            <div class="metric-fill" style="width: 38%"></div>
                        </div>
                        <div class="metric-value">38%</div>
                    </div>
                    <div class="health-metric">
                        <div class="metric-label">Network</div>
                        <div class="metric-bar">
                            <div class="metric-fill" style="width: 78%"></div>
                        </div>
                        <div class="metric-value">78%</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Top Performers -->
        <div class="dashboard-card top-performers">
            <div class="card-header">
                <h3 class="card-title">Top s√¢n th·ªÉ thao</h3>
                <div class="card-actions">
                    <button class="performer-filter active" data-type="revenue">Doanh thu</button>
                    <button class="performer-filter" data-type="bookings">ƒê·∫∑t s√¢n</button>
                </div>
            </div>
            <div class="card-content">
                <div class="performers-list">
                    <div class="performer-item">
                        <div class="performer-rank">1</div>
                        <div class="performer-info">
                            <div class="performer-name">S√¢n B√≥ng ƒê√° A</div>
                            <div class="performer-owner">Ch·ªß s√¢n: Tr·∫ßn Th·ªã B√¨nh</div>
                        </div>
                        <div class="performer-stats">
                            <div class="performer-value">9.0M VNƒê</div>
                            <div class="performer-label">Doanh thu th√°ng</div>
                        </div>
                    </div>
                    <div class="performer-item">
                        <div class="performer-rank">2</div>
                        <div class="performer-info">
                            <div class="performer-name">S√¢n Tennis Elite</div>
                            <div class="performer-owner">Ch·ªß s√¢n: Ph·∫°m VƒÉn D≈©ng</div>
                        </div>
                        <div class="performer-stats">
                            <div class="performer-value">7.5M VNƒê</div>
                            <div class="performer-label">Doanh thu th√°ng</div>
                        </div>
                    </div>
                    <div class="performer-item">
                        <div class="performer-rank">3</div>
                        <div class="performer-info">
                            <div class="performer-name">S√¢n C·∫ßu L√¥ng Vip</div>
                            <div class="performer-owner">Ch·ªß s√¢n: L√™ Ho√†ng Anh</div>
                        </div>
                        <div class="performer-stats">
                            <div class="performer-value">6.8M VNƒê</div>
                            <div class="performer-label">Doanh thu th√°ng</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Alerts & Notifications -->
        <div class="dashboard-card alerts-notifications">
            <div class="card-header">
                <h3 class="card-title">C·∫£nh b√°o & Th√¥ng b√°o</h3>
                <div class="alerts-count">
                    <span class="count-badge">3</span>
                </div>
            </div>
            <div class="card-content">
                <div class="alerts-list">
                    <div class="alert-item urgent">
                        <div class="alert-icon">‚ö†Ô∏è</div>
                        <div class="alert-content">
                            <div class="alert-title">S√¢n m·ªõi c·∫ßn duy·ªát</div>
                            <div class="alert-description">S√¢n Tennis Elite ch·ªù ph√™ duy·ªát t·ª´ 2 gi·ªù tr∆∞·ªõc</div>
                            <div class="alert-time">2 gi·ªù tr∆∞·ªõc</div>
                        </div>
                        <div class="alert-actions">
                            <button class="alert-btn approve">Duy·ªát</button>
                            <button class="alert-btn reject">T·ª´ ch·ªëi</button>
                        </div>
                    </div>
                    <div class="alert-item warning">
                        <div class="alert-icon">‚ö†Ô∏è</div>
                        <div class="alert-content">
                            <div class="alert-title">B√°o c√°o vi ph·∫°m</div>
                            <div class="alert-description">Kh√°ch h√†ng b√°o c√°o s√¢n b√≥ng ƒë√° A</div>
                            <div class="alert-time">3 gi·ªù tr∆∞·ªõc</div>
                        </div>
                        <div class="alert-actions">
                            <button class="alert-btn view">Xem chi ti·∫øt</button>
                        </div>
                    </div>
                    <div class="alert-item info">
                        <div class="alert-icon">‚ÑπÔ∏è</div>
                        <div class="alert-content">
                            <div class="alert-title">C·∫≠p nh·∫≠t h·ªá th·ªëng</div>
                            <div class="alert-description">Phi√™n b·∫£n 2.1.0 ƒë√£ ƒë∆∞·ª£c tri·ªÉn khai</div>
                            <div class="alert-time">5 gi·ªù tr∆∞·ªõc</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/admin/dashboard.css') }}">
{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{{ url_for('static', filename='js/admin/dashboard.js') }}"></script>
{% endblock %} 